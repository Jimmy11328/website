*{
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
html,body{
  height: 100%;
}
.container{
  min-height: 100vh;
  overflow: hidden;
  position: relative;
  background: linear-gradient(180deg, var(--bg-grad-start) 0%, var(--bg-grad-mid) 40%, var(--bg-grad-end) 100%);
}

/* particle canvas behind content but above background shapes */
#particles {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: 2; /* behind UI elements */
  pointer-events: none;
  display: block;
  mix-blend-mode: screen;
  will-change: transform;
}
/* ensure particles do not blend over light-ish UIs */
[data-theme="light"] #particles,
[data-theme="pink"] #particles,
[data-theme="mint"] #particles {
  mix-blend-mode: normal !important;
}

/* disable heavy animation when user prefers reduced motion */
@media (prefers-reduced-motion: reduce) {
  #particles { display: none; }
}

.container > div:nth-child(-n+5){
  position: absolute;
  border-radius: 3rem;
  animation: gradient 4s infinite;
  z-index: 0;
}
@keyframes gradient{
  50% {
    transform: scale(1.3) translate(100px);
  }
}
.container > div:nth-child(1){
  width: 140%;
  height: 110%;
  background: transparent;
  left: -5%;
  top: -5%;
}
.container > div:nth-child(2){
  width: 70%;
  height: 80%;
  background: var(--shape-dark);
  top: -12%;
  right: -12%;
  animation-delay: 1s;
}
.container > div:nth-child(3){
  width: 50%;
  height: 50%;
  background: var(--shape-dark);
  bottom: -10%;
  left: -5%;
  animation-delay: .75s;
}
.container > div:nth-child(4){
  width: 80%;
  height: 65%;
  background: var(--shape-light);
  bottom: -15%;
  right: -20%;
  animation-delay: 1.5s;
}
.container > div:nth-child(5){
  width: 60%;
  height: 50%;
  background: var(--shape-dark);
  animation-delay: 1.9s;
  bottom: 0;
  right: 50%;
}
.container::after{
  position: absolute;
  content: '';
  height: 100%;
  width: 100%;
  left: 0;
  top: 0;
  backdrop-filter: blur(200px);
  z-index: 1;
  pointer-events: none;
}
@keyframes float {
  0%   { transform: translate(-50%, 0); }
  50%  { transform: translate(-50%, -12px); }
  100% { transform: translate(-50%, 0); }
}
.title{
  position: absolute;
  top: 8%;
  left: 50%;
  transform: translate(-50%, 0);
  text-align: center;
  animation: float 3.5s ease-in-out infinite;
  pointer-events: none;
  z-index: 4;
}
body{
  font-family: 'Baloo 2', 'Fredoka One', cursive;
}
.title h1{
  color: var(--title-color);
  font-family: 'Baloo 2', cursive;
  font-weight: 800;
  font-size: 3.6rem;
  margin-bottom: 0.25rem;
}
.title h2{
  color: var(--title-color);
  font-family: 'Baloo 2', cursive;
  font-weight: 700;
  font-size: 1.35rem;
}
.boxes{
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  gap: 1rem;
  align-items: stretch;
  justify-content: space-between;
  width: min(1100px, 90vw);
  z-index: 3;
}
.box{
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  flex: 1 1 0;
  min-width: 220px;
  background: linear-gradient(135deg, var(--box-bg-start) 0%, var(--box-bg-end) 100%);
  border-radius: 1rem;
  padding: 1.25rem 1.5rem;
  gap: 0.75rem;
  text-align: left;
  color: var(--text-color);
  font-weight: 700;
  box-shadow: 0 10px 30px rgba(10,7,30,0.5);
  transition: transform .18s ease, box-shadow .18s ease;
}
.box h3{
  margin-bottom: .35rem;
  font-size: 1.1rem;
  text-align: center;
}
.box p{
  margin-bottom: .75rem;
  font-size: .9rem;
  font-weight: 500;
  opacity: .95;
  text-align: center;
}

.box .btn{
  background: var(--btn-bg);
  border: 1px solid var(--btn-border);
  color: var(--text-color);
  padding: 0.6rem 0;
  width: 160px;
  max-width: 80%;
  text-align: center;
  border-radius: 0.6rem;
  cursor: pointer;
  font-weight: 700;
  display: block;
  margin: 0.5rem auto 0;
  text-decoration: none;
  margin-top: auto;
}

.boxes > .box:nth-child(1) .btn,
.boxes > .box:nth-child(2) .btn,
.boxes > .box:nth-child(3) .btn{
  margin-left: auto;
  margin-right: auto;
}
.box:hover,
.box:focus-within,
.box:focus-visible {
  transform: translateY(-8px);
  box-shadow: 0 22px 50px rgba(10,7,30,0.65);
}

@media (max-width: 720px) {
  .box:hover,
  .box:focus-within,
  .box:focus-visible {
    transform: none;
    box-shadow: 0 14px 30px rgba(10,7,30,0.5);
  }
}
@media (max-width: 900px){
  .boxes{
    gap: 0.75rem;
    width: min(900px, 94vw);
  }
  .box{
    min-width: 200px;
  }
}
@media (max-width: 720px){
  .boxes{
    flex-wrap: wrap;
    transform: translateX(-50%);
    top: 60%;
    justify-content: center;
  }
  .box{
    flex: 1 1 100%;
    max-width: 100%;
    min-width: 0;
    text-align: center;
  }
  .box:nth-child(3){ text-align: center; }
  .box .btn{ margin: 0.5rem auto 0; display: block; width: 70%; max-width: 260px; }
}
.return .btn{
    position: absolute;
    top: 1rem;
    left: 1rem;
    z-index: 5;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 120px;
    padding: 0.6rem 0.9rem;
    background: linear-gradient(135deg, var(--box-bg-start) 0%, var(--box-bg-end) 100%);
    color: #fff;
    border-radius: 0.6rem;
    border: 1px solid rgba(0, 0, 0, 0.12);
    box-shadow: 0 10px 30px rgba(10,7,30,0.5);
    text-decoration: none;
    font-weight: 700;
    cursor: pointer;
    transition: transform .18s ease, box-shadow .18s ease;
}

.return .btn:hover,
.return .btn:focus-visible{
    transform: translateY(-6px);
    box-shadow: 0 18px 40px rgba(10,7,30,0.6);
}

@media (max-width: 720px){
    .return .btn{
        top: 0.6rem;
        left: 0.6rem;
        min-width: 100px;
        padding: 0.5rem 0.75rem;
    }
  }

/* settings UI */
.settings {
  position: fixed;
  top: 1rem;
  right: 2rem;
  z-index: 1000; /* above particles */
  display: flex;
  gap: 0.5rem;
  align-items: flex-start;
  isolation: isolate; /* create new stacking context to prevent canvas blending over panel */
  mix-blend-mode: normal; /* ensure UI isn't affected by background blending */
}
.hamburger {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.45rem 0.6rem;
  background: transparent;
  border: 0;
  cursor: pointer;
  color: var(--settings-text-color);
  font-weight: 700;
  border-radius: 0.45rem;
  transition: background .14s ease, color .14s ease, transform .14s ease;
}
.hamburger.open {
  background: var(--btn-bg);
  color: var(--text-color);
  transform: translateY(-1px);
}
/* keep spans rules harmless if present */
.hamburger span { display: none; }
.hamburger.open span:nth-child(1){ transform: translateY(6px) rotate(45deg); }
.hamburger.open span:nth-child(2){ opacity: 0; }
.hamburger.open span:nth-child(3){ transform: translateY(-6px) rotate(-45deg); }

.settings-panel {
  min-width: 220px;
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
  border-radius: 0.6rem;
  padding: 0.6rem;
  box-shadow: 0 8px 30px rgba(0,0,0,0.35);
  display: none;
  gap: .5rem;
  flex-direction: column;
  align-items: stretch;
  color: var(--settings-text-color);
  position: relative;
  z-index: 1001; /* sit above particles and container contents */
  mix-blend-mode: normal; /* prevent particles from visually blending with panel */
}
.settings-panel.open { display: flex; }

.settings-panel h4 {
  margin: 0 0 0.5rem 0;
  font-weight: 700;
  color: var(--settings-text-color);
}
.theme-swatch {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  padding: 0.45rem 0.6rem;
  justify-content: flex-start;
  border-radius: 0.5rem;
  cursor: pointer;
  background: transparent;
  border: 1px solid rgba(0,0,0,0.04);
  font-weight: 700;
}

/* layout: swatches in rows of 3 with small preview circles */
.settings-panel .swatches {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 0.5rem;
  align-items: center;
  margin-top: 0.5rem;
}

/* preview dot */
.theme-swatch .swatch-preview {
  width: 1rem;
  height: 1rem;
  border-radius: 50%;
  flex: 0 0 1rem;
  box-shadow: inset 0 0 6px rgba(0,0,0,0.12);
  border: 1px solid rgba(0,0,0,0.06);
}

/* highlight selected */
.theme-swatch[aria-pressed="true"] {
  outline: 2px solid var(--accent, #7aa2ff);
  background: rgba(0,0,0,0.02);
}

/* responsive: 2 columns on smaller screens, 1 on very small */
@media (max-width: 600px) {
  .settings-panel .swatches {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}
@media (max-width: 360px) {
  .settings-panel .swatches {
    grid-template-columns: 1fr;
  }
}

/* per-theme preview gradients (static so preview reflects the theme regardless of current active theme) */
.theme-swatch[data-theme="dark"] .swatch-preview { background: linear-gradient(135deg, #0b0b10, #151522); }
.theme-swatch[data-theme="light"] .swatch-preview { background: linear-gradient(135deg, #f4f7fb, #e9eef6); }
.theme-swatch[data-theme="purple"] .swatch-preview { background: linear-gradient(135deg, #3b0f5a, #7b4bff); }
.theme-swatch[data-theme="ocean"] .swatch-preview { background: linear-gradient(135deg, #003e66, #006b9a); }
.theme-swatch[data-theme="sunset"] .swatch-preview { background: linear-gradient(135deg, #ffecd2, #ff7b54); }
.theme-swatch[data-theme="forest"] .swatch-preview { background: linear-gradient(135deg, #0b3b2b, #1d6b4f); }
.theme-swatch[data-theme="aurora"] .swatch-preview { background: linear-gradient(135deg, #0a2b2f, #2d0b3b); }
.theme-swatch[data-theme="mint"] .swatch-preview { background: linear-gradient(135deg, #e8fff5, #c2ffe0); }
.theme-swatch[data-theme="retro"] .swatch-preview { background: linear-gradient(135deg, #f6e7c1, #e8b26a); }
.theme-swatch[data-theme="solar"] .swatch-preview { background: linear-gradient(135deg, #fff6b3, #ffb056); }
.theme-swatch[data-theme="midnight"] .swatch-preview { background: linear-gradient(135deg, #02021b, #17173d); }
.theme-swatch[data-theme="lava"] .swatch-preview { background: linear-gradient(135deg, #6b0000, #ff8066); }
/* removed steel preview */
/* new previews */
.theme-swatch[data-theme="pink"] .swatch-preview { background: linear-gradient(135deg, #ffd6e8, #ffb0d6); }
.theme-swatch[data-theme="galaxy"] .swatch-preview { background: linear-gradient(135deg, #0b0821, #4b0d7a); }
.theme-swatch[data-theme="astraeus"] .swatch-preview { background: linear-gradient(135deg, #1b1330, #5a3b8f); }

:root {
  --settings-text-color: #0b1222; /* default (light theme) */
  --bg-grad-start: #0b0b0b;
  --bg-grad-mid: #0b0b0b;
  --bg-grad-end: #0b0b0b;
  --shape-dark: #000000;
  --shape-light: #ffffff;
  --title-color: #ffffff;
  --box-bg-start: #070707;
  --box-bg-end: #dddddd;
  --text-color: #ffffff;
  --btn-bg: rgba(255,255,255,0.08);
  --btn-border: rgba(255,255,255,0.12);
  --accent: #7aa2ff;
}

/* Dark theme (explicit) */
[data-theme="dark"] {
  --settings-text-color: #ffffff;
  --bg-grad-start: #0f0f0f;
  --bg-grad-mid: #0a0a0a;
  --bg-grad-end: #000000;
  --shape-dark: #0a0a0a;
  --shape-light: #1a1a1a;
  --title-color: #ffffff;
  --box-bg-start: #070707;
  --box-bg-end: #1d1d1d;
  --text-color: #ffffff;
  --btn-bg: rgba(255,255,255,0.06);
  --btn-border: rgba(255,255,255,0.08);
  --accent: #7aa2ff;
}

/* Light theme */
[data-theme="light"] {
  --settings-text-color: #0b1222;
  --bg-grad-start: #f7f7f9;
  --bg-grad-mid: #ffffff;
  --bg-grad-end: #e9eef8;
  --shape-dark: #ffffff;
  --shape-light: #ffffff;
  --title-color: #0b1222;
  --box-bg-start: #e4e4e4;
  --box-bg-end: #d4d4d4;
  --text-color: #0b1222;
  --btn-bg: rgba(0,0,0,0.06);
  --btn-border: rgba(0,0,0,0.08);
  --accent: #4a79ff;
}

/* Purple accent theme */
[data-theme="purple"] {
  --settings-text-color: #ffffff;
  --bg-grad-start: #0b0b17;
  --bg-grad-mid: #2b0d3b;
  --bg-grad-end: #0b0b17;
  --shape-dark: #150822;
  --shape-light: #efd9ff;
  --title-color: #fff3ff;
  --box-bg-start: #2b0d3b;
  --box-bg-end: #efd9ff;
  --text-color: #fff3ff;
  --btn-bg: rgba(255,255,255,0.06);
  --btn-border: rgba(255,255,255,0.08);
  --accent: #c77aff;
}

/* Ocean theme */
[data-theme="ocean"] {
  --settings-text-color: #ffffff;
  --bg-grad-start: #001f3f;
  --bg-grad-mid: #003d66;
  --bg-grad-end: #001f3f;
  --shape-dark: #02243a;
  --shape-light: #7fd3ff;
  --title-color: #aeefff;
  --box-bg-start: #003e66;
  --box-bg-end: #006b9a;
  --text-color: #e8f9ff;
  --btn-bg: rgba(255,255,255,0.06);
  --btn-border: rgba(255,255,255,0.08);
  --accent: #2ec4ff;
}

/* Sunset theme (light-ish, use dark menu text) */
[data-theme="sunset"] {
  --settings-text-color: #0b1222;
  --bg-grad-start: #ffecd2;
  --bg-grad-mid: #fcb69f;
  --bg-grad-end: #ff7b54;
  --shape-dark: #ffd6b6;
  --shape-light: #fff3e6;
  --title-color: #3b2f2f;
  --box-bg-start: #ffd6b6;
  --box-bg-end: #ffb58a;
  --text-color: #2b1f1f;
  --btn-bg: rgba(0,0,0,0.06);
  --btn-border: rgba(0,0,0,0.08);
  --accent: #ff7b54;
}

/* Forest theme */
[data-theme="forest"] {
  --settings-text-color: #ffffff;
  --bg-grad-start: #072117;
  --bg-grad-mid: #0b3b2b;
  --bg-grad-end: #072117;
  --shape-dark: #05261d;
  --shape-light: #9ff2c8;
  --title-color: #dfffe9;
  --box-bg-start: #0b3b2b;
  --box-bg-end: #1d6b4f;
  --text-color: #eafff4;
  --btn-bg: rgba(255,255,255,0.06);
  --btn-border: rgba(255,255,255,0.08);
  --accent: #6be6b5;
}

/* Aurora theme */
[data-theme="aurora"] {
  --settings-text-color: #ffffff;
  --bg-grad-start: #260269;
  --bg-grad-mid: #0a2b2f;
  --bg-grad-end: #2d0b3b;
  --shape-dark: #0a1a28;
  --shape-light: #a8fff0;
  --title-color: #dff7ff;
  --box-bg-start: #122b34;
  --box-bg-end: #2b0d3b;
  --text-color: #e9fffb;
  --btn-bg: rgba(255,255,255,0.06);
  --btn-border: rgba(255,255,255,0.08);
  --accent: #5ff7c6;
}

/* Mint theme (light) */
[data-theme="mint"] {
  --settings-text-color: #0b1222;
  --bg-grad-start: #adf7d7;
  --bg-grad-mid: #a9f5d5;
  --bg-grad-end: #a9fad1;
  --shape-dark: #ffffff;
  --shape-light: #8bfccb;
  --title-color: #08322b;
  --box-bg-start: #ddfff3;
  --box-bg-end: hsl(160, 88%, 78%);
  --text-color: #05332d;
  --btn-bg: rgba(0,0,0,0.06);
  --btn-border: rgba(0,0,0,0.08);
  --accent: #189e6f;
}

/* Retro theme (warm neutrals, light menu text color dark) */
[data-theme="retro"] {
  --settings-text-color: #0b1222;
  --bg-grad-start: #f6e7c1;
  --bg-grad-mid: #f0c987;
  --bg-grad-end: #e8b26a;
  --shape-dark: #f1d7a6;
  --shape-light: #fff6ec;
  --title-color: #4a3020;
  --box-bg-start: #f0c987;
  --box-bg-end: #e8b26a;
  --text-color: #3d2718;
  --btn-bg: rgba(0,0,0,0.06);
  --btn-border: rgba(0,0,0,0.08);
  --accent: #ff9f1c;
}

/* Solar theme (bright, use dark menu text) */
[data-theme="solar"] {
  --settings-text-color: #0b1222;
  --bg-grad-start: #fff6b3;
  --bg-grad-mid: #ffd27a;
  --bg-grad-end: #ffb056;
  --shape-dark: #fff0c3;
  --shape-light: #fff9e6;
  --title-color: #3b2b00;
  --box-bg-start: #ffd27a;
  --box-bg-end: #ffb056;
  --text-color: #3b2b00;
  --btn-bg: rgba(0,0,0,0.06);
  --btn-border: rgba(0,0,0,0.08);
  --accent: #ffb400;
}

/* Midnight theme (very dark) */
[data-theme="midnight"] {
  --settings-text-color: #ffffff;
  --bg-grad-start: #02021b;
  --bg-grad-mid: #0b0b2a;
  --bg-grad-end: #02021b;
  --shape-dark: #040427;
  --shape-light: #1a1a3a;
  --title-color: #dfe7ff;
  --box-bg-start: #0b0b2a;
  --box-bg-end: #17173d;
  --text-color: #e9f0ff;
  --btn-bg: rgba(255,255,255,0.06);
  --btn-border: rgba(255,255,255,0.08);
  --accent: #7aa2ff;
}

/* Lava theme (fiery) */
[data-theme="lava"] {
  --settings-text-color: #ffffff;
  --bg-grad-start: #2b0000;
  --bg-grad-mid: #6b0000;
  --bg-grad-end: #2b0000;
  --shape-dark: #3a0000;
  --shape-light: #ffbbaa;
  --title-color: #fff0f0;
  --box-bg-start: #6b0000;
  --box-bg-end: #ff8066;
  --text-color: #fff3f1;
  --btn-bg: rgba(255,255,255,0.06);
  --btn-border: rgba(255,255,255,0.08);
  --accent: #ff615a;
}

/* Pink theme (light/pastel) */
[data-theme="pink"] {
  --settings-text-color: #0b1222;
  --bg-grad-start: #fff0f6;
  --bg-grad-mid: #ffd9ee;
  --bg-grad-end: #ffd2e8;
  --shape-dark: #ffd6e8;
  --shape-light: #ffffff;
  --title-color: #3b1222;
  --box-bg-start: #ffd6e8;
  --box-bg-end: #ffc4e0;
  --text-color: #3b1222;
  --btn-bg: rgba(0,0,0,0.06);
  --btn-border: rgba(0,0,0,0.08);
  --accent: #ff6fbf;
}

/* Galaxy theme (deep purple/blue, white text) */
[data-theme="galaxy"] {
  --settings-text-color: #ffffff;
  --bg-grad-start: #07021a;
  --bg-grad-mid: #2b0d3b;
  --bg-grad-end: #0b0821;
  --shape-dark: #0b0620;
  --shape-light: #4d3263;
  --title-color: #f9eaff;
  --box-bg-start: #2b0d3b;
  --box-bg-end: #4b0d7a;
  --text-color: #f0eaff;
  --btn-bg: rgba(255,255,255,0.06);
  --btn-border: rgba(255,255,255,0.08);
  --accent: #a77aff;
}

/* Astraeus theme (muted purple/teal, white text) */
[data-theme="astraeus"] {
  --settings-text-color: #ffffff;
  --bg-grad-start: #6d30dd;
  --bg-grad-mid: #1b1330;
  --bg-grad-end: #4529ad;
  --shape-dark: #0b0b1a;
  --shape-light: #b08bff;
  --title-color: #F8A602;
  --box-bg-start: #1b1330;
  --box-bg-end: #3b2a5a;
  --text-color: #F8A602;
  --btn-bg: rgba(255,255,255,0.06);
  --btn-border: rgba(255,255,255,0.08);
  --accent: #9b6bff;
}

/* small visual transition to make changes obvious */
:root, html, body {
  transition: background 240ms ease, color 240ms ease;
}

.settings,
.hamburger,
.settings-panel,
.theme-swatch {
  font-family: 'Baloo 2', 'Fredoka One', cursive;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}